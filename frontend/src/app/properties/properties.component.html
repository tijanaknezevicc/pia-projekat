<div class="container mt-4">

  <div class="row mb-3 toolbar">
    <div class="col-md-2">
      sortiraj prema:
    </div>
    <div class="col-md-2">
      <select id="sort" class="form-control" (change)="onSortChange($event)">
        <option value="name-asc">
          imenu rastuce
        </option>
        <option value="name-desc">
          imenu opadajuce
        </option>
        <option value="location-asc">
          mestu rastuce
        </option>
        <option value="location-desc">
          mestu opadajuce
        </option>
      </select>
    </div>
    <div class="col-md-3"></div>
    <div class="col-md-2">
      <input [(ngModel)]="searchName" class="form-control" placeholder="naziv">
    </div>
    <div class="col-md-2">
      <input [(ngModel)]="searchLocation" class="form-control" placeholder="mesto">
    </div>
    <div class="col-md-1">
      <button class="btn btn-primary btn-md" (click)="load()">
        pretrazi
      </button>
    </div>
  </div>

  @if (properties.length != 0) {
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>naziv</th>
        <th>mesto</th>
        <th>vlasnik</th>
        <th>usluge</th>
        <th>cena-leto</th>
        <th>cena-zima</th>
        <th>ocena</th>
      </tr>
    </thead>
    <tbody>
      @for (property of properties; track property.name) {
      <tr>
        <td>
          <a [routerLink]="['/property-details', property.name]" style="color: cadetblue">{{ property.name }}</a>
        </td>
        <td>{{ property.location }}</td>
        <td>{{ property.owner }}</td>
        <td>{{ property.services }}</td>
        <td>{{ property.pricing.summer }}</td>
        <td>{{ property.pricing.winter }}</td>
        <td>
          <div  style="display: flex; align-items: center; gap: 8px;">
            <div class="stars-empty">
              <div class="stars-filled" [ngStyle]="{'width': (getAvgGrade(property) / 5 * 100) + '%'}"></div>
            </div>
            <div>{{ getAvgGrade(property) | number: '1.2-2'}}</div>
          </div>
        </td>
      </tr>
      }
    </tbody>
  </table>
  }
  @else {
  <div class="alert alert-info" role="alert">
    <span>nema pronadjenih vikendica</span>
  </div>
  }
</div>
